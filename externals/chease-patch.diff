Index: externals/chease/src-f90/Makefile
===================================================================
--- externals/chease/src-f90/Makefile	(revision 1026)
+++ externals/chease/src-f90/Makefile	(working copy)
@@ -9,6 +9,7 @@
 PROG_TEST_CHEASE = test_chease
 PROG_TEST_CHEASE_ITM = test_chease_itm
 PROG_TEST_CHEASE_IMAS = test_chease_imas
+PROG_MUSCLE   = libchease_muscle
 
 # Define variable CHEASE_F90 which will then be used to defined the compilation flags automatically
 
@@ -144,6 +145,8 @@
 SRCS_KEPLER_withlapack	= $(SRCS_0) $(SRCS_all) $(SRCS_0_NOHDF5) $(SRCS_2_ITM) $(SRCS_0_lapackpart)
 # libchease_kepler_imas
 SRCS_KEPLER_IMAS	= $(SRCS_0_IMAS) $(SRCS_all) $(SRCS_0_NOHDF5) $(SRCS_2_IMAS) $(SRCS_0_lapackpart)
+# libchease_muscle
+SRCS_MUSCLE	= $(SRCS_f90_xml_interface) $(SRCS_0) $(SRCS_all) $(SRCS_0_NOHDF5) $(SRCS_2) 
 
 #INCS =	BNDIND.inc COMDAT.inc HERMIT.inc SOLOV.inc mdslib.inc
 INCS =	BNDIND.inc COMDAT.inc HERMIT.inc SOLOV.inc
@@ -166,6 +169,7 @@
 OBJS_KEPLER = $(MODS_ITM:.f90=.o) $(MODS_interpos:.f90=.o) $(SRCS_KEPLER_f90:.f90=.o) $(SRCS_KEPLER_c:.c=.o)
 OBJS_KEPLER_withlapack = $(MODS_ITM:.f90=.o) $(MODS_interpos:.f90=.o) $(SRCS_KEPLER_withlapack:.f90=.o)
 OBJS_KEPLER_IMAS = $(MODS_IMAS:.f90=.o) $(MODS_interpos:.f90=.o) $(SRCS_KEPLER_IMAS:.f90=.o)
+OBJS_MUSCLE = $(MODS_ITM:.f90=.o) $(MODS_interpos:.f90=.o) $(SRCS_MUSCLE:.f90=.o) $(SRCS_c_xml_interface:.c=.o)
 
 .PRECIOUS:	$(SRCS) $(SRCS_1) $(SRCS_IMAS) $(INCS) $(MODS) $(MODS_ITM) $(MODS_interpos) $(MODS_IMAS) 
 
@@ -235,6 +239,12 @@
 	rm -f $(PROG_KEPLER_IMAS).a
 	@ar -rv $(PROG_KEPLER_IMAS).a $(OBJS_KEPLER_IMAS) $(OBJS_IMASlocal)
 
+$(PROG_MUSCLE): checkCHEASE_F90 checkCHEASE_MACHINE $(OBJS_MUSCLE)
+	@echo "CHEASE_F90: $(CHEASE_F90)"
+	rm -f $(PROG_MUSCLE).a
+	@ar -rv $(PROG_MUSCLE).a $(OBJS_MUSCLE) 
+
+
 $(FUTILS)/lib$(futils).a : 
 	# cp $(FUTILS)/$(Makefile_futils) $(FUTILS)/Makefile
 	@cd $(FUTILS); \
Index: externals/chease/src-f90/Makefile.define_FLAGS
===================================================================
--- externals/chease/src-f90/Makefile.define_FLAGS	(revision 1026)
+++ externals/chease/src-f90/Makefile.define_FLAGS	(working copy)
@@ -427,3 +427,133 @@
     OBJS_euitm =
   endif
 endif
+
+ifeq ($(CHEASE_MACHINE),GW)
+  ifeq ($(CHEASE_F90),ifort)
+    F90 = ifort
+    F90FLAGS = -O2 -g -r8 -fPIC  -I$(INC_UAL) -I$(DIR_interpos)
+    F90FLAGS_parser = -O1 -r8 -fPIC  -I$(INC_UAL) -I$(DIR_interpos)
+    F90FLAGS_parser_nor8 = -O1 -fPIC  -I$(INC_UAL) -I$(DIR_interpos)
+    LDFLAGS = -O2 -g -r8 -fPIC  -I$(INC_UAL)
+    FUTILS = $(PWD)/futils_src
+    INCL_FUTILS= -I$(FUTILS)
+    HDF5=
+    INCL_HDF5 = -I$(HDF5)/include
+    LIBS =  -L$(LIB_UAL) -lual -lz -L/afs/ipp/itm/switm/lib/lapack/3.4.2/lib/amd64_intel_12 -llapack -lrefblas
+    LIBS_HDF5 =  -L$(FUTILS) -lfutils -L$(HDF5)/lib -lhdf5_fortran -lhdf5 -lz $(LIBS)
+    LIBSlibxml = -lxml2
+    OBJS_euitm =
+  endif
+endif
+
+ifeq ($(CHEASE_MACHINE),helios) 
+  ifeq ($(CHEASE_F90),ifort) 
+    F90 = ifort 
+    F90FLAGS = -O2 -g -r8 -fPIC  -I$(INC_UAL) -I$(DIR_interpos) 
+    F90FLAGS_parser = -O1 -r8 -fPIC  -I$(INC_UAL) -I$(DIR_interpos) 
+    LDFLAGS = -O2 -g -r8 -fPIC  -I$(INC_UAL) 
+    FUTILS = $(PWD)/futils_src 
+    INCL_FUTILS= -I$(FUTILS) 
+    INCL_HDF5 = -I$(HDF5_DIR)/include 
+    LIBS =  -L$(LIB_UAL) -lual -lz -L$(MKL_LIB) -llapack -lblas 
+    LIBS_HDF5 =  -L$(FUTILS) -lfutils -L$(HDF5_DIR)/lib -lhdf5_fortran -lhdf5 -lz $(LIBS) 
+    LIBSlibxml = -lxml2
+    OBJS_euitm = 
+  endif 
+endif 
+
+ifeq ($(CHEASE_MACHINE),marconi) 
+  ifeq ($(CHEASE_F90),ifort) 
+    F90 = ifort 
+    F90FLAGS = -O2 -g -r8 -fPIC  -I$(INC_UAL) -I$(DIR_interpos) 
+    F90FLAGS_parser = -O1 -r8 -fPIC  -I$(INC_UAL) -I$(DIR_interpos) 
+    LDFLAGS = -O2 -g -r8 -fPIC  -I$(INC_UAL) 
+    FUTILS = $(PWD)/futils_src 
+    INCL_FUTILS= -I$(FUTILS) 
+    INCL_HDF5 = -I$(HDF5_HOME)/include 
+    LIBS =  -L$(LIB_UAL) -lual -lz -L$(MKL_LIB) -llapack -lblas 
+    LIBS_HDF5 =  -L$(FUTILS) -lfutils -L$(HDF5_HOME)/lib -lhdf5_fortran -lhdf5 -lz $(LIBS) 
+    LIBSlibxml = -lxml2
+    OBJS_euitm = 
+  endif 
+endif 
+
+ifeq ($(CHEASE_MACHINE),supermuc) 
+  ifeq ($(CHEASE_F90),ifort) 
+    F90 = ifort 
+    F90FLAGS = -O2 -g -r8 -fPIC  -I$(INC_UAL) -I$(DIR_interpos) 
+    F90FLAGS_parser = -O1 -r8 -fPIC  -I$(INC_UAL) -I$(DIR_interpos) 
+    LDFLAGS = -O2 -g -r8 -fPIC  -I$(INC_UAL) 
+    FUTILS = $(PWD)/futils_src 
+    INCL_FUTILS= -I$(FUTILS) 
+    INCL_HDF5 = -I$(HDF5_BASE)/include 
+    LIBS =  -L$(LIB_UAL) -lual -lz -L$(MKL_LIB) -llapack -lblas 
+    LIBS_HDF5 =  -L$(FUTILS) -lfutils -L$(HDF5_BASE)/lib -lhdf5_fortran -lhdf5 -lz $(LIBS) 
+    LIBSlibxml = -lxml2
+    OBJS_euitm = 
+  endif 
+endif 
+
+ifeq ($(CHEASE_MACHINE),psnc) 
+  ifeq ($(CHEASE_F90),ifort) 
+    F90 = ifort 
+    F90FLAGS = -O2 -g -r8 -fPIC  -I$(INC_UAL) -I$(DIR_interpos) 
+    F90FLAGS_parser = -O1 -r8 -fPIC  -I$(INC_UAL) -I$(DIR_interpos) 
+    LDFLAGS = -O2 -g -r8 -fPIC  -I$(INC_UAL) 
+    FUTILS = $(PWD)/futils_src 
+    INCL_FUTILS= -I$(FUTILS) 
+    INCL_HDF5 = -I$(hdf5_root)/include 
+    LIBS =  -L$(LIB_UAL) -lual -lz -L$(MKL_LIB) -llapack -lblas 
+    LIBS_HDF5 =  -L$(FUTILS) -lfutils -L$(hdf5_root)/lib -lhdf5_fortran -lhdf5 -lz $(LIBS) 
+    LIBSlibxml = -lxml2
+    OBJS_euitm = 
+  endif 
+endif 
+
+ifeq ($(CHEASE_MACHINE),hydra) 
+  ifeq ($(CHEASE_F90),ifort) 
+    F90 = ifort 
+    F90FLAGS = -O2 -g -r8 -fPIC  -I$(INC_UAL) -I$(DIR_interpos) 
+    F90FLAGS_parser = -O1 -r8 -fPIC  -I$(INC_UAL) -I$(DIR_interpos) 
+    LDFLAGS = -O2 -g -r8 -fPIC  -I$(INC_UAL) 
+    FUTILS = $(PWD)/futils_src 
+    INCL_FUTILS= -I$(FUTILS) 
+    INCL_HDF5 = -I$(HDF5_HOME)/include 
+    LIBS =  -L$(LIB_UAL) -lual -lz -L$(MKL_LIB) -llapack -lblas 
+    LIBS_HDF5 =  -L$(FUTILS) -lfutils -L$(HDF5_HOME)/lib -lhdf5_fortran -lhdf5 -lz $(LIBS) 
+    LIBSlibxml = -lxml2
+    OBJS_euitm = 
+  endif 
+endif 
+
+ifeq ($(CHEASE_MACHINE),draco) 
+  ifeq ($(CHEASE_F90),ifort) 
+    F90 = ifort 
+    F90FLAGS = -O2 -g -r8 -fPIC  -I$(INC_UAL) -I$(DIR_interpos) 
+    F90FLAGS_parser = -O1 -r8 -fPIC  -I$(INC_UAL) -I$(DIR_interpos) 
+    LDFLAGS = -O2 -g -r8 -fPIC  -I$(INC_UAL) 
+    FUTILS = $(PWD)/futils_src 
+    INCL_FUTILS= -I$(FUTILS) 
+    INCL_HDF5 = -I$(HDF5_HOME)/include 
+    LIBS =  -L$(LIB_UAL) -lual -lz -L$(MKL_LIB) -llapack -lblas 
+    LIBS_HDF5 =  -L$(FUTILS) -lfutils -L$(HDF5_HOME)/lib -lhdf5_fortran -lhdf5 -lz $(LIBS) 
+    LIBSlibxml = -lxml2
+    OBJS_euitm = 
+  endif 
+endif 
+
+ifeq ($(CHEASE_MACHINE),neale) 
+  ifeq ($(CHEASE_F90),ifort) 
+    F90 = ifort 
+    F90FLAGS = -O2 -g -r8 -fPIC  -I$(INC_UAL) -I$(DIR_interpos) 
+    F90FLAGS_parser = -O1 -r8 -fPIC  -I$(INC_UAL) -I$(DIR_interpos) 
+    LDFLAGS = -O2 -g -r8 -fPIC  -I$(INC_UAL) 
+    FUTILS = $(PWD)/futils_src 
+    INCL_FUTILS= -I$(FUTILS) 
+    INCL_HDF5 = -I$(HDF5_HOME)/include 
+    LIBS =  -L$(LIB_UAL) -lual -lz -L$(MKL_LIB) -llapack -lblas 
+    LIBS_HDF5 =  -L$(FUTILS) -lfutils -L$(HDF5_HOME)/lib -lhdf5_fortran -lhdf5 -lz $(LIBS) 
+    LIBSlibxml = -lxml2
+    OBJS_euitm = 
+  endif 
+endif 
Index: externals/chease/src-f90/Makefile.define_MACHINE
===================================================================
--- externals/chease/src-f90/Makefile.define_MACHINE	(revision 1026)
+++ externals/chease/src-f90/Makefile.define_MACHINE	(working copy)
@@ -60,4 +60,31 @@
  ifneq (,$(findstring yes,$(ITM_ENVIRONMENT_LOADED)))
     # overwrites the CHEASE_MACHINE set in Makefile.define_MACHINE by using hostname
     CHEASE_MACHINE = gateway_with_itm
+    ifeq ($(SYS),GW)
+       CHEASE_MACHINE = GW
+    endif
  endif
+ ifeq ($(SYS),HELIOS)
+   CHEASE_MACHINE = helios
+ endif
+ ifeq ($(SYS),MARCONI)
+   CHEASE_MACHINE = marconi
+ endif
+ ifeq ($(SYS),SUPERMUC)
+   CHEASE_MACHINE = supermuc
+ endif
+ ifeq ($(SYS),INULA)
+   CHEASE_MACHINE = psnc
+ endif
+ ifeq ($(SYS),EAGLE)
+   CHEASE_MACHINE = psnc
+ endif
+ ifeq ($(SYS),HYDRA)
+   CHEASE_MACHINE = hydra
+ endif
+ ifeq ($(SYS),DRACO)
+   CHEASE_MACHINE = draco
+ endif
+ ifeq ($(SYS),NEALE)
+   CHEASE_MACHINE = neale
+ endif
