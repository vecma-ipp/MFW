#/* -*- makefile -*- */


# paths ########################################################################
SRCDIR = bohmgb
OBJDIR = bohmgb/${SYS}


# set up the VPATH for searching for source files ##############################
VPATH = ${SRCDIR}/main ${SRCDIR}/include


# additional flags #############################################################
INCLUDES = -I${OBJDIR} -I${INC_UAL} -I${INC_TYPES} -I${INC_CONSTANTS} \
	-I${INC_XML} -I${INC_BDS}

FC90FLAGS += ${INCLUDES} ${MODSPEC}${OBJDIR} 


# objects files ################################################################
OBJ = ${OBJDIR}/bohmgb_coeff.o ${OBJDIR}/assign_turb_parameters.o \
	${OBJDIR}/bohmgb.o


# rules ########################################################################
.PHONY: all ${SYS} clean


${OBJDIR}/%.o: %.f90
	$(FC90) -o $@ -c $< $(FC90FLAGS)

${OBJDIR}/%.o: %.F90
	$(FC90) -o $@ -c $< $(FC90FLAGS)


%.f90: %.h90
	$(FPP) $(FPPFLAGS) $< $@ 

%.F90: %.h90
	$(FPP) $(FPPFLAGS) $< $@ 


all: ${SYS} ${OBJDIR}/libbohmgb.a


${OBJDIR}/libbohmgb.a: ${OBJ}
	ar -r $@ $^ 
	ranlib $@


${SYS}:
	@mkdir -p ${OBJDIR}


clean:
	rm -rf ${OBJDIR}


